#!/bin/sh

# This loop will update the mpd statusbar module whenever a command changes the
# music player's status. mpd must be running on X's start for this to work.
# With tint2 this script does continuously relaunch the daemon. Which is good

print(){
    status=$(mpc status %state%)
    if [ $status = "playing" ]; then
        color="#00ff00"
    else
        color="#ff0000"
    fi
    echo "<span color=\"$color\">MPD</span>"
}
print
while : ; do
	mpc idle >/dev/null && print
done
