#!/usr/bin/env bash

tr(){
		if [ "$1" = "ar" ]; then
				$TERMINAL -e trans --target="arabic" --speak
		else
				$TERMINAL -e trans ar:"$1"
		fi
}

case "${1:-$(printf "Arabic\\nEnglish\\nFarsi" | dmenu -i -p "Language:")}" in
		# Primary clipboard
        "-p")
            word="$(xclip -o)"
            full="$(sdcv -n "$word")"
            def="$(echo "$full" |  sed '1,/.*noun\|verb\|adjective\|adverb.*/ { d }' )"
            [ -n "$def" ] && notify-send -t 20000 "${word^}" "$def" ;;
        # trans --no-bidi -b --target="arabic" "$(xclip -o)")";;
		# Clipboard clipboard
		"-c")
            word="$(xclip -sel c -o)"
            full="$(sdcv -n "$word")"
            def="$(echo "$full" | sed '1,/.*noun\|verb\|adjective\|adverb.*/ { d }' )"
            [ -n "$def" ] && notify-send -t 20000 "${word^}" "$def" ;;
		# notify-send "$(trans --no-bidi -b --target="arabic" "$(xclip -sel c -o)")";;
		"Arabic") tr "ar";;
		"English") tr "en";;
		"Farsi") tr "fa";;
		*) exit 1;;
esac
