#!/bin/sh

tr(){
		if [ "$1" = "ar" ]; then
				trans --target="arabic" --speak
		else
				trans ar:"$1"
		fi
}

case "$1" in
		# Primary clipboard
        "P")
        word="$(xclip -o)"
        full="$(sdcv -n "$word")"
        def="$(echo "$full" |  sed '1,/.*noun\|verb\|adjective\|adverb.*/ { d }' )"
        [ ! -z "$def" ] && notify-send -t 20000 "${word^}" "$def" ;;
        # trans --no-bidi -b --target="arabic" "$(xclip -o)")";;
		# Clipboard clipboard
		"C")
        word="$(xclip -sel c -o)"
        full="$(sdcv -n "$word")"
        def="$(echo "$full" | sed '1,/.*noun\|verb\|adjective\|adverb.*/ { d }' )"
        [ ! -z "$def" ] && notify-send -t 20000 "${word^}" "$def" ;;
		# notify-send "$(trans --no-bidi -b --target="arabic" "$(xclip -sel c -o)")";;
		"ar") tr "ar";;
		"en") tr "en";;
		"fa") tr "fa";;
		*) exit 1;;
esac
